<script setup>
	import { ref, computed } from 'vue';
	import { version } from "../../package.json"
	import { Combobox, ComboboxInput, ComboboxOptions, ComboboxOption, Dialog, DialogPanel, Menu, MenuButton, MenuItem, MenuItems, TransitionChild, TransitionRoot } from '@headlessui/vue'
	import { Bars3Icon, BellIcon, BellAlertIcon, HomeIcon, UsersIcon, XMarkIcon, MagnifyingGlassIcon, BoltIcon, HeartIcon, ChatBubbleLeftRightIcon, FolderIcon, AdjustmentsVerticalIcon, HomeModernIcon } from '@heroicons/vue/24/outline'
	import { useRoute } from "vue-router";
	import { useRouter } from 'vue-router'
	import { useAgencesStore } from '../stores/agences';
	import { useUserStore } from '../stores/user';
	import { useClientsStore } from "../stores/clients";
	import { useMessageStore } from '../stores/messages';

	const agencesStore = useAgencesStore();
	const userStore = useUserStore();
	const clientsStore = useClientsStore();
	const messageStore = useMessageStore();

	const route = useRoute();
	const router = useRouter();

	const handleLogout = () => {
		userStore.logout()
		.then(res => router.push({name: 'Connexion'}));
	}

	const userNavigation = [
		{ name: 'Déconnexion', callback: handleLogout },
	]

	const navigation = [
		{ name: 'Dashboard', href: '/', icon: HomeIcon, current: route.path == '/' },
		{ name: 'Clients', href: '/clients', icon: UsersIcon, current: route.path == '/clients' || route.path.includes('/clients') },
		{ name: 'Agences', href: '/agences', icon: HomeModernIcon, current: route.path == '/agences' || route.path.includes('/agences') },
		{ name: 'Rencontres', href: '/rencontres', icon: BoltIcon, current: route.path == '/rencontres' },
		{ name: 'Matchings', href: '/matchings', icon: HeartIcon, current: route.path == '/matchings' },
		{ name: 'Messages', href: '/messages', icon: ChatBubbleLeftRightIcon, current: route.path == '/messages' },
		// { name: 'Documents', href: '/factures', icon: FolderIcon, current: route.path == '/factures' },
		// { name: 'Leads', href: '/leads', icon: BellAlertIcon, current: route.path == '/leads' },
		// { name: 'Réglages', href: '/reglages', icon: AdjustmentsVerticalIcon, current: route.path == '/reglages' },
	];	

	const agences = ref([]);
	const openSearch = ref(false);
	const query = ref('');
	const recent = ref([]);
	const countNotif = ref(0);
	
	const filteredPeople = computed(() =>
		query.value === '' ? [] : clientsStore.clients.filter((person) => {
			return person.nom_cli.toLowerCase().includes(query.value.toLowerCase())
		})
	)

	function calculateAge(dateString) {
		let today = new Date();
		let birthDate = new Date(dateString);
		let age = today.getFullYear() - birthDate.getFullYear();
		let monthDifference = today.getMonth() - birthDate.getMonth();
		if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < birthDate.getDate())) {
			age--;
		}
		return age;
	}

	const fetchAgences = () => {
		agencesStore.getAgences()
		.then((res) => {
			if(res.agences.length > 0){
				res.agences.forEach(agence => {
					if(agence.id_agence !== 0){
						let data = {
							id: agence.id_agence,
							name: agence.lib_agence,
							initial: agence.lib_agence.charAt(0)
						}
						agences.value.push(data);
					}
				});

				agences.value.sort((a, b) => {
					return a.name.localeCompare(b.name);
				});
			}
		})
		.catch(err => {
			console.error(err)
		})
	}
	fetchAgences();


	const fetchNotifCount = () => {
		messageStore.getMessagesCount()
		.then(res => countNotif.value = res.count)
		.catch(err => console.error(err))
	}
	fetchNotifCount();

	const sidebarOpen = ref(false);
</script>


<template>
	<div>
		<!-- #region SIDEBAR MOBILE -->
		<TransitionRoot as="template" :show="sidebarOpen">
			<Dialog class="relative z-50 xl:hidden" @close="sidebarOpen = false">
				<TransitionChild as="template" enter="transition-opacity ease-linear duration-300" enter-from="opacity-0" enter-to="opacity-100" leave="transition-opacity ease-linear duration-300" leave-from="opacity-100" leave-to="opacity-0">
					<div class="fixed inset-0 bg-gray-900/80" />
				</TransitionChild>

				<div class="fixed inset-0 flex">
					<TransitionChild as="template" enter="transition ease-in-out duration-300 transform" enter-from="-translate-x-full" enter-to="translate-x-0" leave="transition ease-in-out duration-300 transform" leave-from="translate-x-0" leave-to="-translate-x-full">
						<DialogPanel class="relative mr-16 flex w-full max-w-xs flex-1">
							<TransitionChild as="template" enter="ease-in-out duration-300" enter-from="opacity-0" enter-to="opacity-100" leave="ease-in-out duration-300" leave-from="opacity-100" leave-to="opacity-0">
								<div class="absolute left-full top-0 flex w-16 justify-center pt-5">
									<button type="button" class="-m-2.5 p-2.5" @click="sidebarOpen = false">
										<span class="sr-only">Close sidebar</span>
										<XMarkIcon class="h-6 w-6 text-white" aria-hidden="true" />
									</button>
								</div>
							</TransitionChild>

							<div class="flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-2 ring-1 ring-white/10">
								<div class="flex h-16 shrink-0 items-center justify-center pt-4">
									<svg width="161px" height="65px" viewBox="0 0 161 65" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
										<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
											<g id="Group" transform="translate(-0.000000, 0.000000)" fill-rule="nonzero">
												<path d="M111.661,28.9076262 C109.118,30.4207262 110.104,30.0647262 111.557,29.2192262 C113.01,28.3736262 114.826,27.5726262 111.557,30.5097262 C111.142,30.9547262 112.335,30.1092262 114.203,28.5961262 C117.835,25.6145262 118.458,23.6564262 124.684,24.1459262 C130.911,24.6354262 129.147,23.1224262 131.378,21.4758262 C133.868,19.6957262 134.75,19.2952262 136.203,19.4732262 C136.515,19.5177262 135.736,18.7166262 134.491,17.6931262 C132.519,16.0910262 132.052,15.9130262 130.496,16.1355262 C128.835,16.4025262 128.783,16.3580262 128.524,14.7559262 C128.42,13.8214262 127.798,11.2402262 127.227,9.05966622 C126.604,6.83455622 125.981,3.89740622 125.722,2.60683622 C125.099,-0.374814784 124.996,-0.330312784 123.698,1.53878622 C121.882,4.87645622 122.349,3.22986622 121.831,1.09375622 C121.312,-1.04235378 121.467,0.381723216 120.222,1.71679622 C117.264,4.69844622 116.486,7.54658622 116.279,11.3738262 C116.071,15.2010262 116.901,16.1355262 118.458,18.0936262 L119.547,19.0726262 L117.939,20.5412262 C117.057,21.2978262 115.397,22.9888262 114.93,24.4129262 C114.463,25.8370262 113.736,27.4391262 112.854,28.1511262" id="Path" fill="#E93F80"></path>
												<path d="M144.09,48.6667262 C129.302,54.5410262 112.958,59.1247262 99.4154,61.1718262 C92.3069,62.2399262 78.5049,62.2399262 73.4719,61.1718262 C66.0002,59.6142262 60.5002,57.1221262 56.92,53.7399262 C54.9483,51.8708262 54.9483,51.7818262 55.2077,49.0672262 C55.4671,45.9075262 57.2313,42.3029262 60.0332,38.9652262 C61.953,36.6066262 62.0049,35.7610262 60.2407,34.3815262 C59.203,33.5804262 59.0473,33.6249262 55.3634,35.3160262 C52.4058,36.6511262 51.1086,37.5411262 49.8115,39.1877262 C47.5803,41.9913262 41.7171,47.3316262 41.2501,46.9756262 C41.0945,46.7976262 41.4058,45.9965262 41.9765,45.1955262 C43.585,42.8369262 43.7926,41.5018262 42.5992,40.3448262 L41.5614,39.2767262 L40.4199,40.6118262 C38.2926,43.0594262 33.6227,47.0646262 33.2076,46.7976262 C31.9105,46.1301262 39.5897,38.3422262 42.6511,37.2741262 C43.4813,36.9626262 44.1558,36.4731262 44.1558,36.2060262 C44.1558,35.3160262 42.5992,33.7139262 41.7171,33.7139262 C39.2265,33.7139262 34.3492,37.0961262 31.1322,41.1013262 C29.835,42.7479262 29.368,43.7714262 29.368,45.1510262 C29.368,46.5306262 29.2642,47.0646262 26.9293,47.9546262 C24.1274,48.9782262 22.8821,49.0672262 22.8821,48.2662262 C22.8821,47.0201262 24.4906,42.5254262 25.3208,41.3683262 C27.1369,38.9207262 29.3161,36.8291262 29.9907,36.8291262 C31.3397,36.8291262 35.802,34.9600262 36.0614,34.2924262 C36.3209,33.7584262 36.0614,33.6694262 35.2312,33.9364262 C34.5567,34.1144262 33.3633,34.3370262 32.585,34.4705262 L31.1322,34.6930262 L32.6888,32.1118262 C36.0095,26.4156262 36.0095,23.4784262 32.6888,23.4784262 C29.368,23.4784262 30.4057,23.7899262 29.5756,24.1459262 C28.1746,24.7690262 28.0189,25.0805262 28.0189,26.8606262 C28.0189,28.6407262 27.5001,29.7532262 26.6699,31.1773262 C24.4387,35.1380262 24.3869,35.1825262 19.7689,35.4050262 C13.3868,35.7165262 13.3349,35.6720262 18.0567,30.9548262 C24.6982,24.2349262 28.6935,18.6722262 29.368,15.1120262 C29.6274,13.5989262 29.5237,13.2429262 28.4859,12.6198262 C27.1369,11.8188262 25.9954,11.7743262 23.3491,12.4418262 C20.1321,13.1984262 19.717,13.8659262 19.717,17.8711262 C19.717,23.2114262 17.5897,27.0831262 11.7264,32.6904262 C9.49531,34.8265262 9.08021,35.0045262 6.33021,35.3160262 C1.40095,35.8055262 1.42108547e-14,36.4731262 1.42108547e-14,38.4312262 C1.42108547e-14,40.3893262 1.86793,41.0123262 2.49057,39.8552262 C3.11322,38.6982262 5.18869,38.5202262 5.18869,39.0097262 C5.18869,39.4992262 4.87737,39.6327262 4.46228,39.8997262 C3.32076,40.7453262 1.55661,44.2610262 1.55661,45.7295262 C1.55661,47.1981262 1.86793,47.6431262 2.28303,48.3552262 C3.26888,49.9127262 7.1604,52.9389262 7.9387,52.7164262 C8.3538,52.6274262 8.66512,50.8028262 8.87267,47.4651262 C9.08021,43.6824262 9.39154,41.8578262 10.2217,40.3448262 L11.3114,38.2532262 L14.5802,37.9861262 C16.3963,37.8081262 18.7831,37.5856262 19.9246,37.4076262 L21.9482,37.1851262 L19.6133,39.9887262 C15.2548,45.3735262 15.0991,46.6641262 18.4718,49.7347262 C20.4435,51.5593262 21.2218,51.9598262 22.6227,51.9598262 C24.6982,51.9598262 28.5378,50.4913262 29.8869,49.2452262 C30.3539,48.8002262 31.3397,48.3997262 32.0661,48.3997262 C32.7925,48.3997262 34.0897,47.7321262 35.3869,46.6196262 C37.6699,44.6615262 37.9812,44.5280262 37.5661,45.5070262 C37.0473,46.5751262 38.7595,48.3997262 40.2643,48.3997262 C41.769,48.3997262 45.8681,45.2845262 49.3964,41.1903262 C50.953,39.4102262 52.4058,38.1641262 52.9766,38.1641262 C53.5473,38.1641262 54.2737,38.0306262 54.7407,37.8971262 C55.4671,37.6301262 55.4671,37.8971262 54.4813,39.5437262 C51.42,44.6615262 50.6417,49.0227262 52.1983,52.2269262 C53.4435,54.7635262 59.3068,59.5252262 63.6653,61.4388262 C69.9436,64.2425262 74.1983,64.9990262 83.7974,64.9990262 C95.5757,64.9990262 104.864,63.3524262 120.897,58.3237262 C127.486,56.2766262 149.798,47.2426262 149.331,46.8421262 C149.175,46.7086262 146.84,47.5096262 144.038,48.6222262 L144.09,48.6667262 Z" id="Path" fill="#E93F80"></path>
												<path d="M159.916,17.0701262 C159.258,17.4854262 158.86,17.1294262 158.722,16.0020262 L158.566,14.8449262 C158.566,14.8004262 158.463,14.7559262 158.463,14.8449262 L156.491,16.3135262 C155.349,17.1591262 153.378,18.3606262 152.081,18.9837262 C150.783,19.6067262 149.123,20.4967262 148.345,20.9418262 C147.447,21.4758262 146.684,21.3423262 146.062,20.5412262 C144.142,18.0046262 143,17.7376262 140.25,19.2062262 C138.486,20.1407262 138.486,20.1852262 139.524,20.5857262 C140.717,21.0753262 140.977,21.4758262 142.015,24.8580262 C142.43,26.1930262 143.052,29.0412262 144.816,29.9312262 C147.359,31.1773262 146.892,32.7349262 146.892,36.2060262 C146.892,39.6772262 146.684,40.5227262 146.84,39.9887262 C147.359,37.2296262 148.137,37.3631262 147.982,39.3657262 C147.826,41.3683262 148.864,35.6275262 149.279,30.8658262 C149.59,27.6171262 149.694,27.2611262 150.576,27.4391262 C153.43,28.1066262 158.255,24.8580262 159.552,21.4313262 C161.576,16.1355262 161.265,16.2690262 159.916,17.1146262 L159.916,17.0701262 Z" id="Path" fill="#E93F80"></path>
												<path d="M124.165,28.9522262 C123.231,29.7532262 123.491,32.8684262 124.529,32.8684262 C125.566,32.8684262 125.514,32.1563262 126.293,31.3108262 C127.486,30.0202262 127.642,29.5752262 127.175,29.0857262 C126.397,28.2846262 124.996,28.2401262 124.165,28.9522262 Z" id="Path" fill="#E93F80"></path>
												<path d="M136.826,38.9651262 C137.397,38.0306262 137.448,37.7636262 136.93,37.7636262 C136.411,37.7636262 131.741,42.7033262 132.156,43.0594262 C132.519,43.3709262 135.996,40.3447262 136.826,38.9651262 Z" id="Path" fill-opacity="0" fill="#FFFFFF"></path>
												<path d="M140.354,40.7898262 C136.566,44.3499262 133.038,46.6641262 131.378,46.6641262 C129.717,46.6641262 130.184,45.4180262 132.571,44.2164262 C133.816,43.5934262 135.944,42.0803262 137.241,40.8788262 C139.368,38.9207262 139.628,38.4756262 139.628,36.6511262 C139.628,31.8003262 134.387,33.5804262 128.316,40.4782262 C125.463,43.7714262 121.156,47.2871262 120.481,46.9311262 C119.496,46.3970262 119.807,45.6405262 122.505,41.9023262 C125.359,37.8971262 125.826,35.8055262 124.114,34.4704262 C123.18,33.7139262 123.076,33.8029262 121.415,36.4285262 C118.717,40.7453262 111.246,47.8211262 110.208,46.9756262 C109.897,46.6641262 111.194,44.5725262 114.255,40.5227262 C116.382,37.7191262 116.797,36.8736262 116.59,35.8055262 C116.279,34.5594262 115.5,33.8029262 114.566,33.7584262 C114.359,33.7584262 113.217,34.5149262 111.972,35.4495262 C108.184,38.3866262 108.236,38.3421262 108.236,36.3840262 C108.236,35.4050262 107.821,34.3369262 107.406,33.9364262 C106.68,33.3579262 106.42,33.5359262 104.967,36.0725262 C102.996,39.4547262 98.9484,43.9939262 97.8588,43.9939262 C96.7691,43.9939262 97.1323,43.8604262 97.8588,42.6589262 C98.8446,41.0123262 98.8446,40.0332262 97.8588,39.6772262 C96.6135,39.2767262 95.3682,40.6563262 95.4201,42.4363262 C95.4201,43.7269262 95.1087,44.2609262 93.3446,45.5515262 C89.9719,48.0436262 88.3116,47.5541262 89.5568,44.4834262 C91.0097,40.7898262 95.5238,36.8736262 98.3257,36.8736262 C101.128,36.8736262 99.7786,36.6956262 99.9342,36.4730262 C100.401,35.8500262 97.2361,33.7584262 95.8352,33.7584262 C94.4342,33.7584262 89.8163,36.4730262 87.7408,39.0987262 C84.3681,43.3709262 78.453,48.2661262 78.453,46.7531262 C78.453,45.2400262 79.9577,44.3499262 81.8257,41.8133262 C85.2502,37.0961262 85.6134,36.1615262 84.6795,34.6039262 C83.8493,33.3579262 82.8115,33.5804262 80.321,35.5385262 C79.0757,36.5175262 77.9342,37.3186262 77.7266,37.3186262 C77.5191,37.3186262 77.4153,36.8291262 77.4153,36.2505262 C77.4153,35.1825262 76.2219,33.7584262 75.3398,33.7584262 C74.4577,33.7584262 73.1606,35.0045262 71.137,36.4730262 C68.9577,38.0751262 67.7124,38.7872262 68.0756,38.2086262 C68.7502,37.1406262 68.4388,34.9155262 67.5049,33.8919262 C66.6747,33.0909262 66.0002,33.1799262 66.0002,34.1144262 C66.0002,35.0490262 64.4954,37.0071262 62.6275,39.5882262 C59.0992,44.3944262 58.5803,46.1300262 59.9813,47.8211262 C60.8634,48.8002262 60.552,48.9782262 64.5473,44.4389262 C66.1558,42.6144262 68.6983,40.0777262 70.203,38.8762262 L72.8492,36.6511262 L71.0332,38.8762262 C67.5049,43.2374262 66.6747,45.8630262 68.3351,47.7321262 C69.269,48.7557262 69.1653,48.8447262 70.9294,45.8185262 C72.4341,43.2819262 75.8068,39.8997262 79.2313,37.6301262 L81.3068,36.2060262 L79.3351,38.5201262 C76.637,41.7243262 75.236,44.5725262 75.6511,46.0855262 C76.5332,49.3342262 78.5568,49.2897262 82.6559,45.9075262 L85.7172,43.4154262 L85.7172,45.1955262 C85.7172,48.6667262 89.4531,49.5567262 93.3965,47.0646262 C94.5899,46.3080262 95.5757,45.5070262 95.5757,45.2845262 C95.5757,45.0620262 96.4059,44.8840262 97.3918,44.8840262 C98.9484,44.8840262 99.2078,45.0175262 99.2078,45.9075262 C99.2078,46.7976262 100.713,48.9337262 101.076,48.1771262 C101.646,47.0201262 105.849,42.1693262 108.236,39.9442262 C111.557,36.7846262 112.75,36.2505262 110.675,38.8317262 C107.665,42.5253262 106.783,45.5515262 108.029,47.5986262 C109.014,49.1117262 110.986,48.6222262 114.047,46.1745262 L116.849,43.8604262 L116.849,45.1510262 C116.849,46.8866262 118.198,48.4441262 119.651,48.4441262 C121.104,48.4441262 124.788,46.2190262 125.774,44.8840262 C126.656,43.6379262 126.967,43.7714262 127.071,45.3735262 C127.331,48.7112262 131.066,49.3342262 134.906,46.7086262 C138.071,44.5725262 143.831,39.1432262 143.831,38.3421262 C143.831,37.5411262 142.482,38.8317262 140.406,40.7898262 L140.354,40.7898262 Z M136.93,37.7636262 C137.448,37.7636262 137.397,38.0306262 136.826,38.9652262 C135.996,40.3447262 132.519,43.3709262 132.156,43.0594262 C131.741,42.7034262 136.203,37.7636262 136.93,37.7636262 Z" id="Shape" fill="#E93F80"></path>
												<path d="M91.0097,26.0595262 C89.6607,27.1721262 88.1559,28.0621262 87.6889,28.0176262 C87.0144,28.0176262 87.0663,27.9286262 87.8965,27.4836262 C90.2314,26.2375262 91.788,24.5465262 91.788,23.2114262 C91.788,20.9418262 90.0758,21.4313262 85.7691,25.0360262 C81.722,28.3736262 80.321,28.6852262 81.722,25.8815262 C82.3446,24.5910262 82.5521,24.4574262 83.2786,24.9915262 C84.005,25.4810262 84.2125,25.4365262 84.8352,24.7245262 C85.2503,24.2794262 85.5616,23.3004262 85.5616,22.6329262 C85.5616,21.4758262 85.4059,21.3868262 84.1606,21.6538262 C83.2786,21.7873262 81.255,23.2559262 79.1795,25.1250262 L75.6512,28.2846262 L77.2597,26.0150262 C78.0899,24.7690262 78.8163,23.3894262 78.8163,22.9889262 C78.8163,21.8763262 77.3635,21.6093262 76.1701,22.5438262 C75.1842,23.3004262 75.1323,23.3004262 74.3021,22.2768262 L73.4719,21.2533262 L72.4861,22.8999262 C71.2927,24.9470262 67.5568,28.0621262 66.4153,28.0176262 C65.7927,28.0176262 65.9483,27.7951262 66.8823,27.2611262 C69.4247,25.7925262 70.5144,24.5465262 70.5144,23.1669262 C70.5144,21.7873262 70.3068,21.8318262 69.2691,21.8318262 C68.2313,21.8318262 67.0898,22.7219262 64.8068,24.8135262 C62.6794,26.8161262 61.7455,27.4836262 61.953,26.8161262 C62.2125,26.1485262 62.0049,25.4810262 61.4342,24.9470262 C60.6559,24.1904262 60.6559,24.1014262 61.486,23.7009262 C62.6794,23.1224262 62.0568,21.8318262 60.5521,21.8318262 C59.0474,21.8318262 57.3351,22.8554262 55.986,24.7245262 C54.637,26.6381262 54.7926,28.5072262 56.4011,29.2192262 C57.5426,29.7087262 57.4908,29.7087262 55.7266,30.5543262 C54.1181,31.3108262 53.8068,31.3108262 53.3917,30.7323262 C52.6134,29.7087262 52.8209,26.7271262 53.8068,24.3239262 C54.5332,22.5438262 55.0002,22.0098262 56.3492,21.6538262 C58.6323,20.9863262 59.0474,20.4967262 57.3351,20.4967262 C55.6228,20.4967262 55.9341,20.3632262 56.2455,19.6957262 C57.1275,17.9156262 57.1275,17.2926262 56.2455,16.4915262 C55.7266,16.0020262 55.1558,15.6015262 55.0002,15.6460262 C54.8445,15.6460262 53.1841,17.0701262 51.3681,18.7612262 L48.0992,21.8318262 L44.6228,21.8318262 C42.703,21.8318262 40.8869,21.6093262 40.5756,21.3423262 C39.486,20.4077262 39.3822,21.6983262 40.4718,22.8999262 C41.1983,23.7009262 42.0284,24.0569262 43.17,24.0569262 C44.8303,24.0569262 44.7785,24.0569262 42.0284,25.6590262 C39.7454,26.9941262 39.3822,27.3501262 40.0567,27.7061262 C41.1464,28.1956262 43.4294,27.2166262 46.6464,24.9470262 C47.9436,24.0124262 49.5002,23.1669262 50.1228,22.9889262 C51.2124,22.6774262 51.2124,22.7664262 50.953,25.9705262 C50.7454,28.5517262 50.8492,29.6197262 51.5238,30.7323262 C52.3021,32.1118262 52.3021,32.2898262 51.5238,33.0019262 C50.2785,34.1589262 50.953,35.1825262 52.9766,35.1825262 C55.0002,35.1825262 55.2596,34.6485262 59.0992,31.1773262 C63.3021,27.3056262 63.5096,27.1721262 64.0285,28.1511262 C64.703,29.4862262 66.3634,29.6642262 67.92,28.5962262 C68.7502,28.0310262 69.4611,28.0488262 70.0474,28.6407262 C70.6337,29.2325262 71.1889,29.0990262 71.7078,28.2401262 C72.1229,27.5281262 73.0049,26.5491262 73.5757,26.0595262 L74.7172,25.2140262 L74.1983,26.4600262 C73.7832,27.3056262 73.7832,27.9286262 74.1465,28.5517262 C74.8729,29.7087262 75.8068,29.6197262 77.2597,28.2846262 L78.505,27.1276262 L79.1795,28.2846262 C80.0616,29.6642262 81.722,29.7532262 83.3305,28.4626262 L84.472,27.4836262 L85.4578,28.5072262 C86.8069,29.9312262 88.3635,29.4862262 91.4767,26.7716262 C94.7456,23.9234262 94.3824,23.3894262 91.0097,26.0595262 Z M87.4814,25.8370262 C87.6371,25.3475262 89.4531,23.9679262 89.4531,23.9679262 C89.4531,23.9679262 89.8682,23.6119262 90.1276,23.6119262 C90.3871,23.6119262 89.038,24.8580262 89.038,24.9025262 L88.104,25.7035262 C88.104,25.7035262 87.3776,26.2375262 87.5333,25.7925262 L87.4814,25.8370262 Z M66.2078,25.8370262 C66.3634,25.3475262 68.1795,23.9679262 68.1795,23.9679262 C68.1795,23.9679262 68.5946,23.6119262 68.854,23.6119262 C69.1134,23.6119262 67.7644,24.8580262 67.7644,24.9025262 L66.8304,25.7035262 C66.8304,25.7035262 66.104,26.2375262 66.2596,25.7925262 L66.2078,25.8370262 Z M51.9907,20.9863262 C51.3681,21.4313262 51.42,21.2088262 52.3021,20.1407262 C53.5473,18.5831262 54.2738,18.2271262 53.4436,19.5177262 C53.1841,19.9627262 52.5096,20.6303262 51.9907,20.9863262 Z M54.2738,32.7349262 C52.9766,33.7139262 51.8351,34.1589262 51.8351,33.6694262 C51.8351,33.1799262 55.104,31.6223262 55.4672,31.6223262 C55.6228,31.6223262 55.0521,32.1563262 54.2738,32.7349262 Z M59.0992,26.2820262 C58.4766,26.9941262 57.854,27.6171262 57.7502,27.6171262 C57.387,27.6171262 58.0096,26.7271262 58.9955,25.7035262 C60.2408,24.5019262 60.2926,24.8135262 59.0992,26.2820262 Z" id="Shape" fill="#E93F80"></path>
											</g>
										</g>
									</svg>
								</div>
								<nav class="flex flex-1 flex-col">
									<ul role="list" class="flex flex-col space-y-1">
										<li v-for="item in navigation" :key="item.name">
											<router-link :to="{path: item.href}" :active-class="'!text-rose-600 bg-rose-100'" class="text-gray-700 hover:text-rose hover:bg-gray-200/25 group flex gap-x-3 rounded-md p-3 text-sm leading-6 font-medium">
												<component :is="item.icon" class="h-6 w-6 shrink-0" aria-hidden="true" />
												<span>{{ item.name }}</span>
											</router-link>
										</li>

										<li>
											<div class="text-xs font-semibold leading-6 text-gray-400 mt-12 mb-2">Agences</div>
											<ul role="list" class="flex flex-col space-y-1">
												<li>
													<router-link :to="{path: '/clients', query: {agence: '0'}}" href="#" :class="$route.query.agence == 0 ? 'active bg-rose-100' : false"  class="'text-gray-700 hover:text-rose-600 hover:bg-gray-50 group flex gap-x-3 rounded-md p-2 text-xs leading-6 font-medium">
														<span class="text-gray-400 border-gray-200 group-[.active]:text-rose-600 group-[.active]:border-rose group-hover:border-rose-600 group-hover:text-rose-600 flex h-6 w-6 shrink-0 items-center justify-center rounded-lg border text-[0.625rem] font-medium bg-white">T</span>
														<span class="group-[.active]:text-rose-600">TOUTES</span>
													</router-link>
												</li>

												<li v-for="agence in agences" :key="agence.id">
													<router-link :to="{path: '/clients', query: {agence: agence.id}}" href="#" :class="agence.id == $route.query.agence ? 'active bg-rose-100' : false"  class="'text-gray-700 hover:text-rose-600 hover:bg-gray-50 group flex gap-x-3 rounded-md p-2 text-xs leading-6 font-medium">
														<span class="text-gray-400 border-gray-200 group-[.active]:text-rose-600 group-[.active]:border-rose group-hover:border-rose-600 group-hover:text-rose-600 flex h-6 w-6 shrink-0 items-center justify-center rounded-lg border text-[0.625rem] font-medium bg-white">{{ agence.initial }}</span>
														<span class="group-[.active]:text-rose-600">{{ agence.name }}</span>
													</router-link>
												</li>
											</ul>
										</li>
									</ul>
								</nav>
							</div>
						</DialogPanel>
					</TransitionChild>
				</div>
			</Dialog>
		</TransitionRoot>
		<!-- #endregion -->

		<!-- #region SIDEBAR -->
		<div class="hidden xl:fixed xl:inset-y-0 xl:left-0 xl:z-50 xl:w-36 2xl:w-64 xl:block xl:overflow-y-auto xl:pb-4 border-r border-gray-200 bg-white">
			<div class="flex h-16 shrink-0 items-center justify-center pt-4">
				<svg class="w-32 h-auto" viewBox="0 0 311 146" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
					<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
						<g id="Group">
							<path d="M215.1,64.4559001 C210.23,67.8659001 212.07,67.0359001 214.9,65.1359001 C215.96,64.4259001 221.21,61.4859001 215,68.0359001 C214.2,69.0359001 216.5,67.1359001 220.1,63.7359001 C227.1,57.0359001 228.34,52.6359001 240.3,53.7359001 C246.92,54.3459001 248.9,51.4359001 253.2,47.7359001 C258,43.7359001 259.7,42.8359001 262.5,43.2359001 C263.1,43.3359001 261.6,41.5359001 259.2,39.2359001 C255.4,35.6359001 254.5,35.2359001 251.5,35.7359001 C248.3,36.3359001 248.2,36.2359001 247.7,32.6359001 C247.5,30.5359001 246.3,24.7359001 245.2,19.8359001 C244,14.8359001 242.79,8.18590008 242.27,5.33590008 C241.05,-1.35409992 240.84,-1.27409992 238.41,2.92590008 C238.41,2.92590008 238.41,2.92590008 238.41,2.93590008 C234.9,10.3959001 235.78,6.74590008 234.81,1.92590008 C234.47,0.235900084 234.11,0.325900084 231.71,3.32590008 C226.01,10.0259001 224.55,16.4159001 224.14,25.0059001 C223.7,34.1459001 225.38,35.7059001 228.31,40.1259001 L230.41,42.3259001 L227.31,45.6259001 C225.61,47.3259001 222.39,51.0859001 221.51,54.3259001 C220.51,58.0059001 219.24,61.1159001 217.53,62.6859001" id="Path" fill="#E93F80" fill-rule="nonzero"></path>
							<path d="M277.6,108.8359 C249.1,122.0359 217.6,132.3359 191.5,136.9359 C177.8,139.3359 151.2,139.3359 141.5,137.0359 C127.1,133.5359 116.5,127.9359 109.6,120.3359 C105.8,116.1359 105.8,115.9359 106.3,109.8359 C106.8,102.7359 110.2,94.6359001 115.6,87.1359001 C119.3,81.8359001 119.4,79.9359001 116,76.8359001 C114,75.0359001 113.7,75.1359001 106.6,78.9359001 C100.9,81.9359001 98.4,83.9359001 95.9,87.6359001 C91.6,93.9359001 80.3,105.9359 79.4,105.1359 C79.1,104.7359 79.7,102.9359 80.8,101.1359 C83.9,95.8359001 84.3,92.8359001 82,90.2359001 L80,87.8359001 L77.8,90.8359001 C73.7,96.3359001 64.7,105.3359 63.9,104.7359 C61.4,103.2359 76.2,85.7359001 82.1,83.3359001 C83.7,82.6359001 85,81.5359001 85,80.9359001 C85,78.9359001 82,75.3359001 80.3,75.3359001 C75.5,75.3359001 66.1,82.9359001 59.9,91.9359001 C57.4,95.6359001 56.5,97.9359001 56.5,101.0359 C56.5,105.1359 56.3,105.3359 51.8,107.3359 C46.4,109.6359 44,109.8359 44,108.0359 C44,105.2359 47.1,95.1359001 48.7,92.5359001 C52.2,87.0359001 56.4,82.3359001 57.7,82.3359001 C60.3,82.3359001 68.9,78.1359001 69.4,76.6359001 C69.9,75.4359001 69.5,75.2359001 67.8,75.8359001 C66.5,76.2359001 64.2,76.7359001 62.7,77.0359001 L59.9,77.5359001 L62.9,71.7359001 C69.3,58.9359001 69.3,52.3359001 63,52.3359001 C61.3,52.3359001 58.6,53.0359001 57,53.8359001 C54.3,55.2359001 54,55.9359001 54,59.9359001 C54,62.7359001 53,66.4359001 51.4,69.6359001 C47.1,78.5359001 47,78.6359001 38.1,79.1359001 C25.8,79.8359001 25.7,79.7359001 34.8,69.1359001 C47.6,54.0359001 55.3,41.5359001 56.6,33.5359001 C57.1,30.1359001 56.9,29.3359001 54.9,27.9359001 C52.3,26.1359001 50.1,26.0359001 45,27.5359001 C38.8,29.2359001 38,30.7359001 38,39.7359001 C37.9,51.7359001 33.9,60.4359001 22.6,73.0359001 C18.3,77.8359001 17.5,78.2359001 12.2,78.9359001 C2.7,80.0359001 0,81.5359001 0,85.9359001 C0,89.2359001 3.6,91.7159001 4.8,89.1359001 C6.23,86.0659001 10,86.1359001 10,87.2359001 C10,87.7359001 9.4,88.6359001 8.6,89.2359001 C6.4,91.1359001 3,99.0359001 3,102.3359 C3,104.0359 3.6,106.6359 4.4,108.2359 C6.3,111.7359 13.8,118.5359 15.3,118.0359 C16.1,117.8359 16.7,113.7359 17.1,106.2359 C17.5,97.7359001 18.1,93.6359001 19.7,90.2359001 L21.8,85.5359001 L28.1,84.9359001 C31.6,84.5359001 36.2,84.0359001 38.4,83.6359001 L42.3,83.1359001 L37.8,89.4359001 C29.4,101.5359 29.1,104.4359 35.6,111.3359 C39.4,115.4359 40.9,116.3359 43.6,116.3359 C47.6,116.3359 55,113.0359 57.6,110.2359 C58.5,109.2359 60.4,108.3359 61.8,108.3359 C63.3,108.3359 65.7,106.8359 68.2,104.3359 C72.6,99.9359001 73.2,99.6359001 72.4,101.8359 C71.4,104.2359 74.7,108.3359 77.6,108.3359 C80.7,108.3359 88.4,101.3359 95.2,92.1359001 C98.2,88.1359001 101,85.3359001 102.1,85.3359001 C103,85.3359001 104.6,85.0359001 105.5,84.7359001 C106.9,84.1359001 106.9,84.7359001 105,88.4359001 C99.1,99.9359001 97.6,109.7359 100.6,116.9359 C103,122.6359 114.3,133.3359 122.7,137.6359 C134.8,143.9359 143,145.6359 161.5,145.6359 C184.2,145.7359 202.1,141.9359 233,130.6359 C245.7,126.0359 288.7,105.7359 287.8,104.8359 C287.5,104.5359 283,106.3359 277.6,108.8359 L277.6,108.8359 Z" id="Path" fill="#E93F80" fill-rule="nonzero"></path>
							<path d="M308.1,37.8359001 C306.23,39.2459001 306.18,39.1859001 305.8,35.4359001 L305.53,32.8159001 C305.52,32.6959001 305.38,32.6459001 305.29,32.7159001 L301.5,36.0259001 C299.3,37.9259001 295.5,40.6259001 293,42.0259001 C290.5,43.4259001 287.3,45.4259001 285.8,46.4259001 C284.066667,47.6259001 282.6,47.3259001 281.4,45.5259001 C277.7,39.8259001 275.5,39.2259001 270.2,42.5259001 C266.8,44.6259001 266.8,44.7259001 268.8,45.6259001 C271.1,46.7259001 271.6,47.6259001 273.6,55.2259001 C274.4,58.2259001 275.57,64.6359001 279,66.6259001 C283.88,69.4559001 283,72.9259001 283,80.7259001 C283,86.3259001 282.56,90.4559001 282.89,89.2159001 C283.91,83.0459001 285.39,83.2759001 285.1,87.8259001 C284.94,90.3259001 286.8,79.4259001 287.6,68.7259001 C288.2,61.4259001 288.4,60.6259001 290.1,61.0259001 C295.6,62.5259001 304.89,55.2259001 307.4,47.5259001 C311.29,35.6059001 310.66,35.9059001 308.1,37.8259001 L308.1,37.8359001 Z" id="Path" fill="#E93F80" fill-rule="nonzero"></path>
							<path d="M239.2,64.5359001 C237.4,66.3359001 237.9,73.3359001 239.9,73.3359001 C240.2,73.3359001 241.8,71.7359001 243.3,69.8359001 C245.6,66.9359001 245.9,65.9359001 245,64.8359001 C243.5,63.0359001 240.8,62.9359001 239.2,64.5359001 L239.2,64.5359001 Z" id="Path" fill="#E93F80" fill-rule="nonzero"></path>
							<g transform="translate(114.011111, 74.411630)">
								<path d="M149.588889,12.6242698 C150.688889,10.5242698 150.788889,9.92426983 149.788889,9.92426983 C148.388889,9.92426983 139.788889,21.0242698 140.588889,21.8242698 C141.288889,22.5242698 147.988889,15.7242698 149.588889,12.6242698 Z" id="Path"></path>
								<path d="M156.388889,16.7242698 C149.088889,24.7242698 142.288889,29.9242698 139.088889,29.9242698 C135.588889,29.9242698 136.788889,27.1242698 141.388889,24.4242698 C143.788889,23.0242698 147.888889,19.6242698 150.388889,16.9242698 C154.488889,12.5242698 154.988889,11.5242698 154.988889,7.42426983 C154.988889,-3.47573017 144.888889,0.524269827 133.188889,16.0242698 C127.688889,23.4242698 119.388889,31.3242698 118.088889,30.5242698 C116.188889,29.3242698 116.788889,27.6242698 121.988889,19.2242698 C127.488889,10.2242698 128.388889,5.52426983 125.088889,2.52426983 C123.288889,0.824269827 123.088889,1.02426983 119.888889,6.92426983 C114.688889,16.6242698 100.288889,32.5242698 98.2888889,30.6242698 C97.6888889,29.9242698 100.188889,25.2242698 106.088889,16.1242698 C110.188889,9.82426983 110.988889,7.92426983 110.588889,5.52426983 C109.988889,2.72426983 108.488889,1.02426983 106.688889,0.924269827 C106.288889,0.924269827 104.088889,2.62426983 101.688889,4.72426983 C94.3888889,11.3242698 94.4888889,11.2242698 94.4888889,6.82426983 C94.3888889,4.62426983 93.6888889,2.22426983 92.8888889,1.32426983 C91.4888889,0.0242698269 90.9888889,0.424269827 88.1888889,6.12426983 C84.3888889,13.7242698 76.5888889,23.9242698 74.4888889,23.9242698 C73.0888889,23.9242698 73.0888889,23.6242698 74.4888889,20.9242698 C76.3888889,17.2242698 76.3888889,15.0242698 74.3888889,14.2242698 C71.9888889,13.3242698 69.5888889,16.4242698 69.6888889,20.4242698 C69.7888889,23.3242698 69.0888889,24.5242698 65.6888889,27.4242698 C59.1888889,33.0242698 55.9888889,31.9242698 58.3888889,25.0242698 C61.1888889,16.7242698 69.8888889,7.92426983 75.2888889,7.92426983 C76.6888889,7.92426983 78.0888889,7.52426983 78.3888889,7.02426983 C79.2888889,5.62426983 73.1888889,0.924269827 70.4888889,0.924269827 C66.7888889,0.924269827 58.8888889,7.02426983 54.8888889,12.9242698 C48.3888889,22.5242698 36.9888889,33.5242698 36.9888889,30.1242698 C36.9888889,29.7242698 39.8888889,24.7242698 43.4888889,19.0242698 C50.0888889,8.42426983 50.7888889,6.32426983 48.9888889,2.82426983 C47.3888889,0.0242698269 45.3888889,0.524269827 40.5888889,4.92426983 C38.1888889,7.12426983 35.9888889,8.92426983 35.5888889,8.92426983 C35.2888889,8.92426983 34.9888889,7.82426983 34.9888889,6.52426983 C34.9888889,4.12426983 32.6888889,0.924269827 30.9888889,0.924269827 C30.4888889,0.924269827 26.7888889,3.72426983 22.8888889,7.02426983 C18.6888889,10.6242698 16.2888889,12.2242698 16.9888889,10.9242698 C18.2888889,8.52426983 17.6888889,3.52426983 15.8888889,1.22426983 C14.2888889,-0.575730173 12.9888889,-0.375730173 12.9888889,1.72426983 C12.9888889,2.72426983 10.0888889,8.22426983 6.48888889,14.0242698 C-0.311111111,24.8242698 -1.31111111,28.7242698 1.38888889,32.5242698 C3.08888889,34.7242698 2.48888889,35.1242698 10.1888889,24.9242698 C13.2888889,20.8242698 18.1888889,15.1242698 21.0888889,12.4242698 L26.1888889,7.42426983 L22.6888889,12.4242698 C15.8888889,22.2242698 14.2888889,28.1242698 17.4888889,32.3242698 C19.2888889,34.6242698 19.0888889,34.8242698 22.4888889,28.0242698 C25.3888889,22.3242698 31.8888889,14.7242698 38.4888889,9.62426983 L42.4888889,6.42426983 L38.6888889,11.6242698 C33.4888889,18.8242698 30.7888889,25.2242698 31.5888889,28.6242698 C33.2888889,35.9242698 37.1888889,35.8242698 45.0888889,28.2242698 L50.9888889,22.6242698 L50.9888889,26.6242698 C50.9888889,34.4242698 58.1888889,36.4242698 65.7888889,30.8242698 C68.0888889,29.1242698 69.9888889,27.3242698 69.9888889,26.8242698 C69.9888889,26.3242698 71.5888889,25.9242698 73.4888889,25.9242698 C76.4888889,25.9242698 76.9888889,26.2242698 76.9888889,28.2242698 C76.9888889,30.9242698 79.8888889,35.0242698 80.5888889,33.3242698 C81.6888889,30.7242698 89.7888889,19.8242698 94.3888889,14.8242698 C100.788889,7.72426983 103.088889,6.52426983 99.0888889,12.3242698 C93.2888889,20.6242698 91.5888889,27.4242698 93.9888889,32.0242698 C95.8888889,35.4242698 99.6888889,34.3242698 105.588889,28.8242698 L110.988889,23.6242698 L110.988889,26.5242698 C110.988889,30.4242698 113.588889,33.9242698 116.388889,33.9242698 C118.988889,33.9242698 126.288889,28.9242698 128.188889,25.9242698 C129.888889,23.1242698 130.488889,23.4242698 130.688889,27.0242698 C131.188889,34.5242698 138.388889,35.9242698 145.788889,30.0242698 C151.888889,25.2242698 162.988889,13.0242698 162.988889,11.2242698 C162.988889,10.1242698 160.388889,12.3242698 156.388889,16.7242698 L156.388889,16.7242698 Z M149.788889,9.92426983 C150.788889,9.92426983 150.688889,10.5242698 149.588889,12.6242698 C147.988889,15.7242698 141.288889,22.5242698 140.588889,21.8242698 C139.788889,21.0242698 148.388889,9.92426983 149.788889,9.92426983 Z" id="Shape" fill="#E93F80" fill-rule="nonzero"></path>
							</g>
							<path d="M175.29,58.0159001 C172.69,60.5159001 169.79,62.5159001 168.89,62.4159001 C167.59,62.4159001 167.69,62.2159001 169.29,61.2159001 C173.79,58.4159001 176.79,54.6159001 176.79,51.6159001 C176.79,46.5159001 173.49,47.6159001 165.19,55.7159001 C157.39,63.2159001 154.69,63.9159001 157.39,57.6159001 C158.59,54.7159001 158.99,54.4159001 160.39,55.6159001 C161.79,56.7159001 162.19,56.6159001 163.39,55.0159001 C164.19,54.0159001 164.79,51.8159001 164.79,50.3159001 C164.79,47.7159001 164.49,47.5159001 162.09,48.1159001 C160.39,48.4159001 156.49,51.7159001 152.49,55.9159001 L145.69,63.0159001 L148.79,57.9159001 C150.39,55.1159001 151.79,52.0159001 151.79,51.1159001 C151.79,48.6159001 148.99,48.0159001 146.69,50.1159001 C144.79,51.8159001 144.69,51.8159001 143.09,49.5159001 L141.49,47.2159001 L139.59,50.9159001 C137.29,55.5159001 130.09,62.5159001 127.89,62.4159001 C126.69,62.4159001 126.99,61.9159001 128.79,60.7159001 C133.69,57.4159001 135.79,54.6159001 135.79,51.5159001 C135.79,49.0159001 135.39,48.5159001 133.39,48.5159001 C131.69,48.5159001 129.19,50.5159001 124.79,55.2159001 C120.69,59.7159001 118.89,61.2159001 119.29,59.7159001 C119.79,58.2159001 119.39,56.7159001 118.29,55.5159001 C116.79,53.8159001 116.79,53.6159001 118.39,52.7159001 C120.69,51.4159001 119.49,48.5159001 116.59,48.5159001 C113.49,48.5159001 110.39,50.8159001 107.79,55.0159001 C105.19,59.3159001 105.49,63.5159001 108.59,65.1159001 C110.79,66.2159001 110.69,66.2159001 107.29,68.1159001 C104.19,69.8159001 103.59,69.8159001 102.79,68.5159001 C101.29,66.2159001 101.69,59.5159001 103.59,54.1159001 C104.99,50.1159001 105.89,48.9159001 108.49,48.1159001 C112.89,46.6159001 113.69,45.5159001 110.39,45.5159001 C108.09,45.5159001 107.69,45.2159001 108.29,43.7159001 C109.99,39.7159001 109.99,38.3159001 108.29,36.5159001 C107.29,35.4159001 106.19,34.5159001 105.89,34.6159001 C105.59,34.6159001 102.39,37.8159001 98.89,41.6159001 L92.59,48.5159001 L85.89,48.5159001 C82.19,48.5159001 78.69,48.0159001 78.09,47.4159001 C75.99,45.3159001 75.79,48.2159001 77.89,50.9159001 C79.29,52.7159001 80.89,53.5159001 83.09,53.5159001 C86.29,53.5159001 86.19,53.5159001 80.89,57.1159001 C76.49,60.1159001 75.79,60.9159001 77.09,61.7159001 C79.19,62.8159001 83.59,60.6159001 89.79,55.5159001 C92.29,53.4159001 95.29,51.5159001 96.49,51.1159001 C98.59,50.4159001 98.59,50.6159001 98.09,57.8159001 C97.69,63.6159001 97.89,66.0159001 99.19,68.5159001 C100.69,71.6159001 100.69,72.0159001 99.19,73.6159001 C96.79,76.2159001 98.09,78.5159001 101.99,78.5159001 C104.79,78.5159001 106.39,77.3159001 113.79,69.5159001 C121.89,60.8159001 122.29,60.5159001 123.29,62.7159001 C124.59,65.7159001 127.79,66.1159001 130.79,63.7159001 C132.39,62.4492334 133.756667,62.4825668 134.89,63.8159001 C136.023333,65.1492334 137.09,64.8492334 138.09,62.9159001 C138.89,61.3159001 140.59,59.1159001 141.69,58.0159001 L143.89,56.1159001 L142.89,58.9159001 C142.09,60.8159001 142.09,62.2159001 142.79,63.6159001 C144.19,66.2159001 145.99,66.0159001 148.79,63.0159001 L151.19,60.4159001 L152.49,63.0159001 C154.19,66.1159001 157.39,66.3159001 160.49,63.4159001 L162.69,61.2159001 L164.59,63.5159001 C167.19,66.7159001 170.19,65.7159001 176.19,59.6159001 C182.49,53.2159001 181.79,52.0159001 175.29,58.0159001 L175.29,58.0159001 Z M168.48,57.5559001 C168.79,56.4959001 172.25,53.3859001 172.25,53.3859001 C172.25,53.3859001 173.06,52.5659001 173.55,52.6259001 C174.09,52.6959001 171.49,55.4759001 171.41,55.5459001 C171.41,55.5459001 171.41,55.5459001 171.41,55.5459001 L169.56,57.2959001 C169.56,57.2959001 168.2,58.4959001 168.49,57.5259001 L168.48,57.5559001 Z M127.49,57.5559001 C127.8,56.4959001 131.26,53.3859001 131.26,53.3859001 C131.26,53.3859001 132.07,52.5659001 132.56,52.6259001 C133.1,52.6959001 130.5,55.4759001 130.42,55.5459001 C130.42,55.5459001 130.42,55.5459001 130.42,55.5459001 L128.57,57.2959001 C128.57,57.2959001 127.21,58.4959001 127.5,57.5259001 L127.49,57.5559001 Z M100.09,46.6159001 C98.89,47.6159001 98.99,47.1159001 100.69,44.7159001 C103.09,41.2159001 104.49,40.4159001 102.89,43.3159001 C102.39,44.3159001 101.09,45.8159001 100.09,46.6159001 Z M104.49,73.0159001 C101.99,75.2159001 99.79,76.2159001 99.79,75.1159001 C99.79,74.6159001 106.09,70.5159001 106.79,70.5159001 C107.09,70.6159001 105.99,71.7159001 104.49,73.0159001 Z M113.79,58.5159001 C112.59,60.1159001 111.39,61.5159001 111.19,61.5159001 C110.49,61.5159001 111.69,59.5159001 113.59,57.2159001 C115.99,54.5159001 116.09,55.2159001 113.79,58.5159001 L113.79,58.5159001 Z" id="Shape" fill="#E93F80" fill-rule="nonzero"></path>
						</g>
					</g>
				</svg>	
			</div>
			<nav class="mt-0 xl:px-2 xl:py-4 2xl:p-4">
				<ul role="list" class="flex flex-col space-y-1">
					<li v-for="item in navigation" :key="item.name">
						<router-link :to="{path: item.href}" :active-class="'!text-rose-600 bg-rose-100'" class="text-gray-700 hover:text-rose hover:bg-gray-200/25 group flex gap-x-3 rounded-md p-3 text-sm leading-6 font-medium items-center">
							<component :is="item.icon" class="2xl:h-6 2xl:w-6 xl:h-5 xl:w-5 shrink-0 " aria-hidden="true" />
							<span class="xl:text-xs 2xl:text-sm">{{ item.name }}</span>
						</router-link>
					</li>

					<li>
						<div class="text-xs font-semibold leading-6 text-gray-400 mt-12 mb-2">Agences</div>
						<ul role="list" class="flex flex-col space-y-1">
							<li>
								<router-link :to="{path: '/clients', query: {agence: '0'}}" href="#" :class="$route.query.agence == 0 ? 'active bg-rose-100' : false"  class="'text-gray-700 hover:text-rose-600 hover:bg-gray-50 group flex gap-x-3 rounded-md p-2 text-xs 2xl:leading-6 font-medium items-center">
									<span class="text-gray-400 border-gray-200 group-[.active]:text-rose-600 group-[.active]:border-rose group-hover:border-rose-600 group-hover:text-rose-600 flex 2xl:h-6 2xl:w-6 xl:h-4 xl:w-4 shrink-0 items-center justify-center rounded-lg border text-[0.625rem] font-medium bg-white">
										
									</span>
									<span class="group-[.active]:text-rose-600 xl:text-xs 2xl:text-sm">TOUTES</span>
								</router-link>
							</li>

							<li v-for="agence in agences" :key="agence.id"> 
								<router-link :to="{path: '/clients', query: {agence: agence.id}}" href="#" :class="agence.id == $route.query.agence ? 'active bg-rose-100' : false"  class="'text-gray-700 hover:text-rose-600 hover:bg-gray-50 group flex gap-x-3 rounded-md p-2 text-xs 2xl:leading-6 font-medium items-center">
									<span class="text-gray-400 border-gray-200 group-[.active]:text-rose-600 group-[.active]:border-rose group-hover:border-rose-600 group-hover:text-rose-600 flex 2xl:h-6 2xl:w-6 xl:h-4 xl:w-4 shrink-0 items-center justify-center rounded-lg border text-[0.625rem] font-medium bg-white">
										{{ agence.initial }}
									</span>
									<span class="group-[.active]:text-rose-600 xl:text-xs 2xl:text-sm">{{ agence.name }}</span>
								</router-link>
							</li>
						</ul>
					</li>
				</ul>
			</nav>
		</div>
		<!-- #endregion -->

		<!-- #region BAR DU HAUT + ROUTER VIEW -->
		<div class="xl:pl-36 2xl:pl-64">
			<div class="sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 xl:px-8">
				<button type="button" class="-m-2.5 p-2.5 text-gray-700 xl:hidden" @click="sidebarOpen = true">
					<span class="sr-only">Open sidebar</span>
					<Bars3Icon class="h-6 w-6" aria-hidden="true" />
				</button>

				<!-- Separator -->
				<div class="h-6 w-px bg-gray-900/10 xl:hidden" aria-hidden="true" />

				<div class="flex flex-1 gap-x-4 xl:gap-x-6">
					<div class="flex-1"></div>
					<div class="flex items-center gap-x-4 xl:gap-x-6">
						<router-link :to="{name: 'Messages'}" class="-m-2.5 p-2.5 text-gray-400 hover:text-gray-500 flex items-center gap-1 group">	
							<span class="sr-only">View notifications</span>
								<BellIcon :class="countNotif ? 'text-rose' : 'opacity-75 cursor-not-allowed'" class="h-6 w-6 group-hover:text-gray-300 duration-300 ease-out" aria-hidden="true" />
							<span class="text-xs px-2 py-1 rounded-md bg-rose text-white group-hover:bg-gray-300 duration-300 ease-out">{{ countNotif }}</span>
						</router-link>

						<!-- Separator -->
						<div class="hidden xl:block xl:h-6 xl:w-px xl:bg-gray-900/10" aria-hidden="true" />

						<!-- Profile dropdown -->
						<Menu as="div" class="relative">
							<MenuButton class="-m-1.5 flex items-center p-1.5">
								<span class="sr-only">Open user menu</span>

								<span class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center font-semibold">
									{{ userStore.userLog.prenom.toUpperCase().charAt(0) }}
								</span>

								<span class="hidden xl:flex xl:items-center">
									<span class="ml-4 text-sm font-semibold leading-6 text-gray-900" aria-hidden="true">
										{{ userStore.userLog.prenom }}
									</span>
								<ChevronDownIcon class="ml-2 h-5 w-5 text-gray-400" aria-hidden="true" />
								</span>
							</MenuButton>
							<transition enter-active-class="transition ease-out duration-100" enter-from-class="transform opacity-0 scale-95" enter-to-class="transform opacity-100 scale-100" leave-active-class="transition ease-in duration-75" leave-from-class="transform opacity-100 scale-100" leave-to-class="transform opacity-0 scale-95">
								<MenuItems class="absolute right-0 z-10 mt-2.5 w-32 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-gray-900/5 focus:outline-none">
									<MenuItem v-for="item in userNavigation" :key="item.name" v-slot="{ active }">
										<a @click="item.callback" :class="[active ? 'bg-gray-50' : '', 'block px-3 py-1 text-sm leading-6 text-gray-900']">{{ item.name }}</a>
									</MenuItem>
								</MenuItems>
							</transition>
						</Menu>
					</div>
				</div>
			</div>

			<main>
				<RouterView/>
			</main>
		</div>
		<!-- #endregion -->

		<!-- #region POPUP RECHERCHE -->
		<TransitionRoot :show="openSearch" as="template" @after-leave="query = ''" appear>
			<Dialog as="div" class="relative z-50" @close="openSearch = false">
			<TransitionChild as="template" enter="ease-out duration-300" enter-from="opacity-0" enter-to="opacity-100" leave="ease-in duration-200" leave-from="opacity-100" leave-to="opacity-0">
				<div class="fixed inset-0 bg-black backdrop-blur-sm bg-opacity-50 transition-opacity" />
			</TransitionChild>

			<div class="fixed inset-0 z-10 w-screen overflow-y-auto p-4 sm:p-6 md:p-20">
				<TransitionChild as="template" enter="ease-out duration-300" enter-from="opacity-0 scale-95" enter-to="opacity-100 scale-100" leave="ease-in duration-200" leave-from="opacity-100 scale-100" leave-to="opacity-0 scale-95">
					<DialogPanel class="mx-auto max-w-3xl transform divide-y divide-gray-100 overflow-hidden rounded-xl bg-white shadow-2xl ring-1 ring-black ring-opacity-5 transition-all">
						<Combobox v-slot="{ activeOption }" @update:modelValue="onSelect">
							<div class="relative">
								<MagnifyingGlassIcon class="pointer-events-none absolute left-4 top-3.5 h-5 w-5 text-gray-400" aria-hidden="true" />
								<ComboboxInput class="h-12 w-full border-0 bg-transparent pl-11 pr-4 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm" placeholder="Recherche..." @change="query = $event.target.value" />
							</div>

							<ComboboxOptions v-if="query === '' || filteredPeople.length > 0" class="flex transform-gpu divide-x divide-gray-100" as="div" static hold>
								<div :class="['max-h-96 min-w-0 flex-auto scroll-py-4 overflow-y-auto px-6 py-4', activeOption && 'sm:h-96']">
										<h2 v-if="query === ''" class="mb-4 mt-2 text-xs font-semibold text-gray-500">Recherches récentes</h2>
										<div hold class="-mx-2 text-sm text-gray-700">
											<ComboboxOption v-for="person in query === '' ? recent : filteredPeople" :key="person.id" :value="person" as="template" v-slot="{ active }">
													<div :class="['group flex cursor-default select-none items-center rounded-md p-2', active && 'bg-gray-100 text-gray-900']">
														<img :src="`https://heartmanagement.fr/soft/images/cli/${person.id_cli}.jpg`" alt="" class="h-6 w-6 flex-none rounded-full bg-gray-200 object-cover" />
														<span class="ml-3 flex-auto truncate">{{ person.pNoms_cli }} {{ person.nom_cli }}</span>
														<ChevronRightIcon v-if="active" class="ml-3 h-5 w-5 flex-none text-gray-400" aria-hidden="true" />
													</div>
											</ComboboxOption>
										</div>
								</div>

								<div v-if="activeOption" class="hidden h-96 w-1/2 flex-none flex-col divide-y divide-gray-100 overflow-y-auto sm:flex">
										<div class="flex-none p-6 text-center">
											<img :src="`https://heartmanagement.fr/soft/images/cli/${activeOption.id_cli}.jpg`" loading="lazy" alt="" class="mx-auto h-16 w-16 rounded-full object-cover" />
											<h2 class="mt-3 font-semibold text-gray-900">
													{{ activeOption.pNoms_cli }} {{ activeOption.nom_cli }}
											</h2>
											<p class="text-sm leading-6 text-gray-500">
													{{ activeOption.prof_cli }} - {{ activeOption.dateNaiss_cli ? calculateAge(activeOption.dateNaiss_cli) + " ans" : '' }}
											</p>
										</div>
										<div class="flex flex-auto flex-col justify-between p-6">
											<dl class="grid grid-cols-1 gap-x-6 gap-y-3 text-xs text-gray-700">
													<dt class="col-end-1 font-semibold text-gray-900" v-if="activeOption.telPri_cli">Téléphone</dt>
													<dd v-if="activeOption.telPri_cli">
														{{ activeOption.telPri_cli }}
													</dd>
													<dt class="col-end-1 font-semibold text-gray-900">Ville</dt>
													<dd class="text-xs">
														{{ activeOption.cp_cli }} {{ activeOption.ville_cli }}
													</dd>
													<dt class="col-end-1 font-semibold text-gray-900">Caractéristiques</dt>
													<dd class="text-xs">
														{{ activeOption.taille_cli }} cm, {{  activeOption.poid_cli }} kg
													</dd>
													<dt class="col-end-1 font-semibold text-gray-900">Description</dt>
													<dd class="text-xs">
														{{ activeOption.desc_cli }} 
													</dd>
											</dl>
											<button type="button" class="mt-6 w-full rounded-md bg-rose-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-rose-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-600">Voir le profil complet</button>
										</div>
								</div>
							</ComboboxOptions>

							<div v-if="query !== '' && filteredPeople.length === 0" class="px-6 py-14 text-center text-sm sm:px-14">
								<UsersIcon class="mx-auto h-6 w-6 text-gray-400" aria-hidden="true" />
								<p class="mt-4 font-semibold text-gray-900">Aucun profil trouvé</p>
								<p class="mt-2 text-gray-500">Nous n'avons trouvé personne selon vos critères</p>
							</div>
						</Combobox>
					</DialogPanel>
				</TransitionChild>
			</div>
			</Dialog>
		</TransitionRoot>
		<!-- #endregion -->
	</div>
</template>

